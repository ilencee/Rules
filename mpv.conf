# ======================= 硬件解码 =======================
hwdec=d3d11va
hwdec-codecs=all

# ======================= 视频输出 =======================
vo=gpu-next
gpu-api=d3d11
fullscreen=yes

# ======================= 关闭所有画质增强 =======================
profile=fast              # 不使用 gpu-hq
interpolation=no          # 关闭插帧
deband=no                 # 关闭去色带
sigmoid-upscaling=no      # 关闭平滑过渡

# ======================= 使用中性缩放 =======================
scale=bilinear            # 最接近“原始”
cscale=bilinear
dscale=bilinear
tscale=bilinear

# ======================= 关闭额外色彩管理 =======================
target-colorspace-hint=no
icc-profile-auto=no

# ======================= 音频 =======================
audio-file-auto=fuzzy
audio-channels=auto
audio-spdif=no

# ======================= 播放行为 =======================
keep-open=yes
save-position-on-quit=yes

# ======================= OSD =======================
osd-level=1
# ======================== 缓存总开关 ==========================
cache=yes
# 开启流媒体缓存（HTTP/Emby 必须开）

# ========== 缓存存储方式 ==========
cache-on-disk=no
# 只使用内存缓存

# ========== 最大缓存容量 ==========
demuxer-max-bytes=1024MiB
# 允许缓存的最大数据量（不是强制占满）
# 1024MiB = 1GB
# 只是“上限”，不会一开始就吃满1GB
# 建议：
# 8GB内存 → 512MiB
# 16GB内存 → 1024MiB
# 32GB以上 → 2048MiB

# ========== 缓存时长 ==========
cache-secs=300
# 单位是“秒”，不是毫秒

# ========== 预读时间 ==========
demuxer-readahead-secs=150
# 控制播放器“提前读取”的时间
# 防止拖动进度条后瞬间卡顿
# 一般设置为 cache-secs 的 50%~70%

# ========== 缓冲不足处理 ==========
cache-pause=yes
# 当缓存不足时自动暂停，而不是卡顿爆音
cache-pause-wait=5
# 缓冲不足时等待 5 秒再恢复播放
# 可以避免网络瞬时抖动导致反复卡顿